---
layout: post
title: Visual studio code, pipenv를 활용한 강화학습 개발 환경 꾸리기(6)
date: 2023-11-03 10:00 +0900
tags: [pipenv, 강화학습, vscode, tutorial, PyTorch, Gymnasium, CartPole]
categories: 강화학습
toc:  true
---

## Debugging

이 시리즈의 마지막 포스트입니다.
이번 포스트에서는 CartPole 예제에서 breakpoint를 이용해 디버깅하는 방법에 관해 설명하겠습니다.

사실 이런 내용은 강화학습에 국한된 이야기가 아닙니다.
일반적인 Python 개발에 있어, 아니 Python 뿐만 아니라 거의 모든 프로그래밍에 적용할 수 있는 방법이고 그렇게 하는 것이 거의 필수라 생각합니다.

![vscode_debug](/assets/img/RL_6/vscode_debug.png)
<center>VS code에서 지원하는 여러 Debugger extensions</center>
<p align="center">
  <a href="https://code.visualstudio.com/docs/editor/debugging">출처</a>
</p>

<br/>

그래서 이 포스트를 따로 떼 놓아서 새로운 제목을 달지 고민했지만, 그냥 이 시리즈에 두겠습니다.

기초적인 __breakpoint__ 걸기 연습을 해보겠습니다.
PyTorch CartPole 예제에서 복사하셨다면 6번째 셀의 아래 그림과 같은 라인에 라인넘버 앞에 빨간점을 클릭해서 찍어봅시다.
혹은 라인을 클릭하고 __F9__ 단축키를 통해서도 찍을 수 있습니다.

![breakpoint](/assets/img/RL_6/breakpoint.png)
<center>Breakpoint 설정</center>
<br/>

그 다음 오른쪽 위 셀 메뉴 아이콘에서 위쪽 셀 모두 실행 (Execute Abobe Cells)를 눌러서 해당 셀 위에 있는 모든 셀을 실행하겠습니다.
다음으로 누를 버튼은 디버그 버튼입니다.
디버그 버튼은 오른쪽에 셀 실행 버튼 옆에 숨어있습니다.
네번째 포스트를 참고해주세요.

코드가 실행되다가 우리가 설정한 breakpoint에 딱 걸려있는게 보이시나요?

![breakpoint_works](/assets/img/RL_6/breakpoint_works.png)
<center>Breakpoint 동작 모습과 디버깅 콘솔</center>
<br/>

이렇게 스크립트가 도는 중간에 잠시 멈춤 상태에서 현재 저장된 변수들의 값을 보려면 어떻게 해야 할까요?
데이터 뷰어를 사용하면 되겠죠?
기억이 나지 않는다면 본 시리즈의 네번째 포스트를 또 참고해주세요.

코드를 한줄 진행시켜 볼까요?
__F10__ 키를 눌러주세요.
해당 줄의 코드를 실행하고 다음 줄로 넘어간 것을 볼 수 있습니다.
방금 실행한 코드를 보면 <mark>select_action()</mark> 함수가 <mark>state</mark>를 인수로 받아 실행하고 return된 값을 <mark>action</mark> 이라는 변수에 담는 동작을 했네요.

Jupyter Notebook 탭에서 <mark>action</mark> 이라는 변수 행이 새로 생긴 것을 감지하셨나요?

![action_var](/assets/img/RL_6/action_var.png)
<center>새로 생긴 action 변수</center>
<br/>

혹시 못 보셨으면 다시 한번 위 과정을 반복해 보겠습니다.
변수가 생기는 것을 봤어도 다시 해보겠습니다.
<em>kernel restart</em> 개념을 알아야 하거든요!
